<template>
  <div class="faq">
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="author" content="NRI FAQ">
      <meta name="robots" content="index,follow,noodp,noydir">
      <meta name="keywords" content="NRI FAQ">
      <meta name="description" content="NRI FAQ">
      <meta name="copyright" content="NRI, Inc. All Rights Reserved.">
      <title>NRI FAQ</title>
      <meta property="og:title" content="NRI FAQ">
      <meta property="og:description" content="NRI FAQ">
    </head>

    <body>

    <!-- ============ヘッダ============ -->
    <header class="header header--visitor">
      <div class="header-inner">

        <div class="header-logo">
          <a class="header-logo__link" href="./" previewlistener="true">
            <img class="image" src="../assets/logo.jpg" alt="Nomura Research Institute">
          </a>
          <div class="text">Nomura Research Institute</div>
        </div>


        <div class="header-link">
          <ul class="header-nav">
            <li class="header-nav__list">
              <a class="header-nav__link" href="#" @click.prevent="showFAQForm">よくあるご質問トップ</a>
            </li>
          </ul>
        </div>
      </div>
    </header>
    <!-- /.header -->
    <!-- ============/ヘッダ============ -->


    <div class="hdg-lv1 hdg-lv1--visitor">
      <h1 class="hdg-lv1__element" xt-marked="ok">よくあるご質問</h1>
    </div>


    <div id="str-contents">
      <div id="str-contents-inner">
        <div id="sai-tag-app" class="net">
          <div id="sai-tag-app-main">
            <div data-v-3b947974="" class="FaqClientWrapper">
              <div data-v-e1cfd5e6="" data-v-3b947974="" class="loading-wrapper"><!----> <!----> <!----> <!---->
                <div data-v-6ed57b63="" data-v-3b947974="" class="FaqClientMultiple" data-v-e1cfd5e6="">
                  <div data-v-688a1315="" data-v-6ed57b63="" class="FaqClientPage sai-pc">
                    <div data-v-688a1315="" id="sai-top" class="sai-wrap">
                      <div data-v-688a1315="" class="sai-contentBody">
                        <div data-v-688a1315="" class="sai-category">
                          <div data-v-688a1315="" class="sai-category__list">
                            <div data-v-288b08e5="" data-v-688a1315="" class="sai-resourceTree">
                              <!---->
                              <div data-v-288b08e5="" class="items">
                                <div data-v-288b08e5="" class="item talkScriptType-node">
                                  <div data-v-288b08e5="" class="sai-resourceTree">
                                    <div data-v-288b08e5="" class="content withItems"><span
                                      data-v-288b08e5="" class="title" xt-marked="ok">
      目录列表页
    </span></div> <!----></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div data-v-688a1315="" id="sai-tag-search-input" class="sai-content">
                          <div data-v-688a1315="" class="sai-content__wrap">
                            <div data-v-688a1315="" class="sai-content__wrap__search">
                              <div data-v-688a1315="" class="sai-input"><!---->
                                <div data-v-688a1315="" class="sai-input__title">
                                  <div data-v-688a1315="" class="icon"><img data-v-688a1315=""
                                                                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZGVmcz48c3R5bGU+LmF7ZmlsbDojMzMzO2ZpbGwtcnVsZTpldmVub2RkO308L3N0eWxlPjwvZGVmcz48cGF0aCBjbGFzcz0iYSIgZD0iTTYuMjg2LDE3LjQyOWE1LjE0Myw1LjE0MywwLDEsMSw1LjE0My01LjE0M0E1LjE0Myw1LjE0MywwLDAsMSw2LjI4NiwxNy40MjlaTTYuMjg2LDZhNi4yODUsNi4yODUsMCwxLDAsNi4yODUsNi4yODZBNi4yODYsNi4yODYsMCwwLDAsNi4yODYsNloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTYpIi8+PHBhdGggY2xhc3M9ImEiIGQ9Ik0xMS45MjEsMTcuMTEzYTcuNyw3LjcsMCwwLDEtLjgwOC44MDhMMTUuMTkyLDIyLDE2LDIxLjE5MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTYpIi8+PC9zdmc+">
                                  </div>
                                  <div data-v-688a1315="" class="text" xt-marked="ok">
                                    検索する
                                  </div>
                                </div>
                                <div data-v-688a1315="" class="sai-input__field">
                                  <div data-v-688a1315="">
                                    <div data-v-5b52de44="" data-v-688a1315="">
                                      <div data-v-5b52de44="" class="sai-tagged-input">
                                        <div data-v-5b52de44=""
                                             class="sai-tagged-input__field"><input
                                          data-v-5b52de44="" type="text" size="1"
                                          placeholder="キーワードを入力してください">
                                          <div data-v-5b52de44=""
                                               class="sai-tagged-input__field__close"
                                               style="display: none;"><a
                                            data-v-5b52de44="" class="icon"><img
                                            data-v-5b52de44="" src=""></a></div>
                                        </div> <!----> <!----></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div data-v-688a1315="" class="sai-recommend"
                                   style="height: auto; display: none;">
                                <div data-v-688a1315="">
                                  <div data-v-57b49209="" data-v-688a1315=""
                                       class="sai-tag-list">
                                    <div data-v-57b49209="" class="sai-tag-list__head">
                                      <div data-v-57b49209=""
                                           class="sai-tag-list__head__title"><span
                                        data-v-57b49209="" class="text"
                                        xt-marked="ok">よく見られているキーワード</span></div>
                                    </div>
                                    <div data-v-57b49209=""
                                         class="sai-tag-list__tags"></div> <!----></div>
                                </div>
                              </div>
                            </div>
                            <div data-v-688a1315="" class="sai-content__wrap__faq" style="">
                              <div data-v-688a1315="" class="sai-content__wrap__faq__content">
                                <div data-v-688a1315=""
                                     class="sai-content__wrap__faq__content__header">
                                  <div data-v-688a1315=""
                                       class="sai-content__wrap__faq__content__header__title"
                                       xt-marked="ok">
                                    よくあるご質問
                                  </div>
                                </div>
                                <div data-v-d5467936="" data-v-688a1315=""
                                     class="sai-list-content">
                                  <ul data-v-d5467936="" class="sai-list-content__lists">

                                    <li v-for="faq in faqs" :key="faq.id" data-v-d5467936=""
                                        class="sai-list-content__lists__item"
                                        style="animation-delay: 0.05s;"><i
                                      data-v-d5467936=""
                                      class="sai-list-content__lists__item__top_icon"></i>
                                      <div data-v-d5467936=""
                                           class="sai-list-content__lists__item__wrapper">
                                        <div data-v-d5467936=""
                                             class="sai-list-content__lists__item__content">
                                          <div data-v-d5467936=""
                                               class="sai-list-content__lists__item__content__ancesters"><span
                                            data-v-d5467936=""
                                            class="sai-list-content__lists__item__content__ancesters__ancester"
                                            xt-marked="ok">
              NISA
              <span data-v-d5467936="" xt-marked="ok">＞</span></span><span data-v-d5467936=""
                                                                           class="sai-list-content__lists__item__content__ancesters__ancester"
                                                                           xt-marked="ok">
              つみたてNISA
                                            <!----></span></div>
                                          <div data-v-d5467936=""
                                               class="sai-list-content__lists__item__content__title">
                                            <div data-v-d5467936=""
                                                 class="sai-list-content__lists__item__content__title__text"
                                                 xt-marked="ok">
                                              {{ faq.title }}
                                            </div>
                                          </div>
                                        </div>
                                        <div data-v-d5467936=""
                                             class="sai-list-content__lists__item__category">
                                          <div data-v-d5467936=""
                                               class="sai-list-content__lists__item__category__text"
                                               xt-marked="ok">
                                            FAQ{{ faq.id }}
                                          </div>
                                        </div>
                                      </div>
                                      <div data-v-d5467936=""
                                           class="sai-list-content__lists__item__wrapper sp">
                                        <div data-v-d5467936=""
                                             class="sai-list-content__lists__item__content">
                                          <div data-v-d5467936=""
                                               class="sai-list-content__lists__item__content__ancesters"><span
                                            data-v-d5467936=""
                                            class="sai-list-content__lists__item__content__ancesters__ancester"
                                            xt-marked="ok">
              NISA
              <span data-v-d5467936="" xt-marked="ok">&gt;</span></span><span data-v-d5467936=""
                                                                              class="sai-list-content__lists__item__content__ancesters__ancester"
                                                                              xt-marked="ok">
              つみたてNISA
                                            <!----></span></div>
                                          <div data-v-d5467936=""
                                               class="sai-list-content__lists__item__category">
                                            <div data-v-d5467936=""
                                                 class="sai-list-content__lists__item__category__text"
                                                 xt-marked="ok">
                                              {{ faq.title }}
                                            </div>
                                          </div>
                                        </div>
                                        <div data-v-d5467936=""
                                             class="sai-list-content__lists__item__content__title">
                                          <div data-v-d5467936=""
                                               class="sai-list-content__lists__item__content__title__text"
                                               xt-marked="ok">
                                            FAQ{{ faq.id }}
                                          </div>
                                        </div>
                                      </div>
                                      <div data-v-d5467936=""
                                           class="sai-list-content__lists__item__icon">
                                        <div data-v-d5467936="" class="img"></div>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div> <!----></div>
              </div>
            </div>
          </div>
          <div data-v-a20b4bf2="" class="multimodal"></div>
        </div>
      </div><!-- /#str-contents-inner -->
    </div>
    </body>
  </div>
</template>

<script>

import ListNRIFQAS from "../queries/ListNRIFQAS";
import FAQForm from './FAQForm.vue'; // 导入FAQForm组件
import Vue from 'vue';
import VModal from 'vue-js-modal';
Vue.use(VModal, { dynamic: true });
import uuidV4 from 'uuid/v4'

// 在这里引入外部CSS文件
import '../assets/style.css';
export default {
  name: 'App',
  data() {
    return {
      faqs: [],
      tag: '',
      category: '',
      hydrated: false,
      isFAQFormVisible: false, // 控制FAQForm.vue组件的显示状态
    };
  },
  async mounted() {
    try {
      if (this.$apollo && this.$apollo.provider && this.$apollo.provider.defaultClient) {
        await this.$apollo.provider.defaultClient.hydrated();
        this.hydrated = true;
      }
    } catch (error) {
      console.error('Error in mounted hook:', error);
      this.hydrated = true;
    }
  },
  apollo: {
    faqs: {
      query: ListNRIFQAS,
      variables() {
        let filter = {};
        if (this.tag) {
          filter.tag = { eq: this.tag };
        }
        if (this.category) {
          filter.category = { eq: this.category };
        }

        return Object.keys(filter).length ? { filter } : {};
      },
      update: data => {
        return data.listNRIFQAS.items;
      },
      result({ data, loading, networkStatus }) {
        console.log('Result:', data, loading, networkStatus);
      }
    }
  },
  methods: {
    showFAQForm() {
      // 使用vue-js-modal的方法来显示FAQForm.vue组件
      this.$modal.show(FAQForm);
    },
  },
  components: {
    FAQForm,
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

</style>
